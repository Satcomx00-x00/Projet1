config {
 doctype = xhtml_trans
 xhtml_cleaning = all
 baseURL = {$baseURL}
# absRefPrefix = {$baseURL}
 prefixLocalAnchors = all
 inlineStyle2TempFile = 1
 removeDefaultJS = external
 disablePrefixComment = 1
# headerComment =
 charset = utf-8
 metaCharset = utf-8
 additionalHeaders = Content-Type:text/html;charset=utf-8
 sendCacheHeaders = 1
 index_enable = 1
 index_externals = 1
 index_metatags = 0
 admPanel = 0
 meaningfulTempFilePrefix = 1
 spamProtectEmailAddresses = 1
# spamProtectEmailAddresses_atSubst = <img src="fileadmin/templates/gfx/ico_substitute.gif" border="0" alt="" style="vertical-align: middle" />
 spamProtectEmailAddresses_atSubst = (at) 
 simulateStaticDocuments = 0
 tx_realurl_enable = 1
# extTarget = _blank
# intTarget = _top
# as we have 'strict' as doctype we clear internal and external target for links
# extTarget =
# intTarget =
 linkVars = L
 uniqueLinkVars = 1
 redirectOldLinksToNew = 1
 sys_language_uid = 0
 sys_language_mode = content_fallback
 language = en
 locale_all = en_EN
 htmlTag_langKey = en
 pageTitleFirst = 0
 noPageTitle = 2
}

# Default PAGE object:
page = PAGE
page {
 typeNum = 0
 includeCSS {
  file1 = typo3conf/sys/templates/css/styles.css
  file1.media = screen
 }

 headerData {
  # 10 is reserved for temp.headTemplate
  20 = TEXT
  20.data = page:subtitle // page:title
  20.wrap = <title> |&nbsp;&#x7c;&nbsp;NAS4Free - The Free Network Attached Storage Project</title>
  30 = TEXT
  30.value (
<script type="text/javascript">
 (function() {
  var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
  po.src = 'https://apis.google.com/js/plusone.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
 })();
</script>
)
  40 = TEXT
  40.value (
<div id="fb-root"></div>
<script>(function(d, s, id) {
 var js, fjs = d.getElementsByTagName(s)[0];
 if (d.getElementById(id)) return;
 js = d.createElement(s); js.id = id;
 js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
 fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script>
)
 }

 meta {
  keywords.field = keywords
  keywords.ifEmpty (
nas4free, nas, network attatched storage, network, storage, zfs, cifs, smb, bittorrent, firewall, software, raid, software raid, softwareraid, freenas, sourceforge, open source, oss, ssh, web, webgui, nas4free zfs, nas4free smb, nasforfree, nasfourfree
  )
  description.field = description
  description.ifEmpty (
   
  )
  author = 1001styles
  robots = index, follow
  revisit-after = 2 days
  MSSmartTagsPreventParsing = true
  imagetoolbar  = false
 }
 shortcutIcon = typo3conf/sys/templates/gfx/favicon.ico
}

[globalVar = TSFE:page|layout = 1]
[GLOBAL]

# switch doctype declaration for internet exploder as we do not want that bastard to run in quirks mode
[browser = msie]
 page {
  config.doctypeSwitch = 1
 }
[GLOBAL]

[globalVar = TSFE:id = 2]
# add id="home" to body tag when on home
 page {
  bodyTagCObject = HTML
  bodyTagCObject {
   value = <body id="home">
  }
 }

# collect content for contentheader
 temp.contentheader = COA
 temp.contentheader {
  stdWrap.wrap = <div>|</div>
  10 = CONTENT
  10 {
   table = tt_content
   select {
    pidInList = 14
    orderBy = sorting
    where = colPos=0
    languageField = sys_language_uid
   }
  }
 }
[GLOBAL]

# set 404 header for 404 error page (ID15) manually - just to make sure
[PIDinRootline = 15]
 config.additionalHeaders = HTTP/1.1 404 Not Found
[GLOBAL]

plugin.tx_automaketemplate_pi1 {
 content = FILE
 content.file = typo3conf/sys/templates/_index.html
 relPathPrefix = typo3conf/sys/templates/
 elements {
  HEAD.all = 1
  HEAD.all.subpartMarker = DOCUMENT_HEADER
  HEAD.rmTagSections = title
  BODY.all = 1
  BODY.all.subpartMarker = DOCUMENT_BODY

  ### main ###
  DIV.id.NAS4FreeLogo = 1
  DIV.id.download = 1
  DIV.id.navmeta = 1

  DIV.id.navmain = 1
  DIV.id.contentheader = 1
  DIV.id.col1cnt = 1
  DIV.id.col2cnt = 1
  
  DIV.id.footercopyright = 1
  DIV.id.footercol1 = 1
  DIV.id.footercol2 = 1
  DIV.id.footercol3 = 1
  DIV.id.footercol4 = 1
 }
}

temp.buttonhome = HTML
temp.buttonhome {
 value = <img src="typo3conf/sys/templates/gfx/1px_TRANS.gif" alt="home" />
 value.typolink {
  parameter = 2
  ATagParams = title="Home"
  ATagBeforeWrap = 1
 }
}

temp.download = COA
temp.download {
 10 = RECORDS
 10 {
  tables = tt_content
  source = 5
  dontCheckPid = 1
 }
}

temp.navmain = HMENU
temp.navmain {
 entryLevel = 0
 1 = TMENU
 1 {
  wrap = <ul>|</ul>
  accessKey = 0
  noBlur = 1
  NO = 1
  NO {
   ATagTitle.field = subtitle // title
   wrapItemAndSub = <li>|</li>
   stdWrap.htmlSpecialChars = 1
  }
  ACT < .NO
  ACT.ATagParams = class="act"
 }
 2 < .1
}

temp.navmeta = HMENU
temp.navmeta {
 wrap = |
 special = directory
 special.value = 9
 1 = TMENU
 1 {
  wrap = <ul>|</ul>
  accessKey = 0
  noBlur = 1
  NO = 1
  NO {
   ATagTitle.field = subtitle // title
   wrapItemAndSub = <li>|</li>
   stdWrap.htmlSpecialChars = 1
  }
  ACT < .NO
  ACT.ATagParams = class="act"
 }
}

temp.col1cnt = COA
temp.col1cnt {
 stdWrap.cObject < styles.content.getBorder
 stdWrap.ifEmpty.cObject = CONTENT
 stdWrap.ifEmpty.cObject {
  table = tt_content
  slide = -1
  select {
   pidInList = 2
   orderBy = sorting
   where = colPos=3
   languageField = sys_language_uid
  } 
 }
}

temp.copyright = COA
temp.copyright {
 10 = TEXT
 10.data = date:U
 10.strftime = %Y
 #10.wrap = Copyright &copy;&nbsp;2012-|&nbsp;NAS4Free<br />All rights reserved.
 10.wrap = Copyright &copy;&nbsp;|&nbsp;NAS4Free<br />All rights reserved.
}

temp.footercol1 < temp.navmain
temp.footercol1 {
 1.wrap = <ul><li><strong>Navigation:</strong></li>|</ul>
 2 >
}

temp.footercol2 < temp.navmeta
temp.footercol2 {
 wrap = |<br />
 special.value = 21
}

temp.footercol3 < temp.footercol2
temp.footercol3 {
 special.value = 22
}

temp.footercol4 = COA
temp.footercol4 {
 wrap = <div class="sm">|</div>
 10 = HTML
 10.value = <div class="g-plusone" data-annotation="inline" data-width="150" data-href="http://www.nas4free.org"></div>  
 10.stdWrap.wrap = <div class="smCnt">|</div>
 20 = HTML
 20.value = <div class="fb-like" data-href="http://www.nas4free.org/" data-send="false" data-layout="button_count" data-width="150" data-show-faces="false" data-action="recommend" data-colorscheme="light" data-font="arial"></div>
 20.stdWrap.wrap = <div class="smCnt">|</div>
 30 = HTML
 30.value (
<a href="https://twitter.com/share" class="twitter-share-button" data-url="http://www.nas4free.org/" data-text="NAS4Free" data-related="NAS4Free" data-hashtags="NAS4Free">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
)
 30.stdWrap.wrap = <div class="smCnt">|</div>
 40 = HTML
 40.value (
<script src="//platform.linkedin.com/in.js" type="text/javascript"></script>
<script type="IN/Share" data-url="http://www.nas4free.org/" data-counter="right"></script>
)
 40.stdWrap.wrap = <div class="smCnt">|</div>
}

plugin.tx_chgallery_pi1.gallery.image {
  imageLinkWrap  = 1
  imageLinkWrap {
    enable = 1
    typolink {
      title.field= tx_chgalleryTitle
      parameter.override.cObject = IMG_RESOURCE
      parameter.override.cObject {
        file.import.data = TSFE:lastImageInfo|origFile
        file.maxW = 800
        file.maxH = 600
        stdWrap.postUserFunc = user_replaceSpaces
      }
      # used lightbox is pmkslimbox
      ATagParams = rel="lightbox"
      ATagParams.override = rel="lightbox[presentlb{field:uid}]"
      ATagParams.insertData = 1
    }
  }
}

plugin.tx_perfectlightbox_pi1.single.image < plugin.tx_chgallery_pi1.gallery.image


plugin.tx_powermail_pi1 {
 # overwrite mail settings
 email {
  recipient_mail {
   sender.name = TEXT
   sender.name.value = NAS4Free Website
   sender.email = TEXT
   sender.email.value = info@nas4free.org
  }
  sender_mail {
   sender.name = TEXT
   sender.name.value = NAS4Free Website
   sender.email = TEXT
   sender.email.value = info@nas4free.org
  }
 }
}


tt_content {
# caption wrap only if not empty
 image.20.rendering.dl.caption.if.isTrue.field = imagecaption
 stdWrap {
  #dataWrap = <a id="c{field:uid}" style="visibility:hidden;"><!-- --></a> |

  # define wraps for tt_content frame
  innerWrap.cObject {
   default {
   }
   40 = TEXT
   40.value = <div class="box01">|</div>
  }
 }
}

### RENDER ###
temp.headTemplate = TEMPLATE
temp.headTemplate {
 template =< plugin.tx_automaketemplate_pi1
 workOnSubpart = DOCUMENT_HEADER
}

temp.mainTemplate = TEMPLATE
temp.mainTemplate {
 template =< plugin.tx_automaketemplate_pi1
 workOnSubpart = DOCUMENT_BODY
 subparts.NAS4FreeLogo < temp.buttonhome
 subparts.download < temp.download
 subparts.navmeta < temp.navmeta
 subparts.navmain < temp.navmain
 subparts.contentheader < temp.contentheader
 subparts.contentheader.wrap = <!--TYPO3SEARCH_begin-->|<!--TYPO3SEARCH_end-->
 subparts.col1cnt < temp.col1cnt
 subparts.col1cnt.wrap = <!--TYPO3SEARCH_begin-->|<!--TYPO3SEARCH_end-->
 subparts.col2cnt < styles.content.get
 subparts.col2cnt.wrap = <!--TYPO3SEARCH_begin-->|<!--TYPO3SEARCH_end-->
 subparts.footercopyright < temp.copyright
 subparts.footercol1 < temp.footercol1
 subparts.footercol2 < temp.footercol2
 subparts.footercol3 < temp.footercol3
 subparts.footercol4 < temp.footercol4
}

page.10 < temp.mainTemplate
page.headerData.10 < temp.headTemplate